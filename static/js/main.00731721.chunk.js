(this["webpackJsonpreact-books"]=this["webpackJsonpreact-books"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/logo.28a32a78.svg"},18:function(e,t,a){e.exports=a(43)},23:function(e,t,a){},24:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(4),r=a.n(o),c=a(3);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(23),a(24);var u=a(2),s=function(){var e=l.a.useState(""),t=Object(u.a)(e,2),a=t[0],n=t[1],o=l.a.useState(!1),r=Object(u.a)(o,2),c=r[0],s=r[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(h,null),l.a.createElement("main",null,l.a.createElement(S,{isFetching:c,onChange:function(e){return n(e.currentTarget.value)},value:a}),l.a.createElement("h2",{className:"sr-only"},"Book List"),l.a.createElement(k,{searchQuery:a,isFetchingCallback:s})))},i=a(15),m=a.n(i),h=function(){return l.a.createElement("header",null,l.a.createElement("h1",{className:"sr-only"},"React Bookshelf"),l.a.createElement("img",{src:m.a,className:"logo",alt:"React Bookshelf"}))},d=function(e){var t=e.count,a=e.page,n=e.onClick;return l.a.createElement("div",{className:"table-actions"},l.a.createElement("button",{disabled:0===t||0===a,onClick:function(){return n(a-1)}},l.a.createElement("span",{role:"img","aria-label":"Show Previous"},"\ud83d\udc48"),l.a.createElement("span",null," Prev")),l.a.createElement("span",{className:"progress"},t>0?"Showing ".concat(0===a?1:10*a," - ").concat(10*(a+1)," of ").concat(t):null),l.a.createElement("button",{disabled:0===t||t/a<=10,onClick:function(){return n(a+1)}},l.a.createElement("span",null,"Next "),l.a.createElement("span",{role:"img","aria-label":"Show Next"},"\ud83d\udc49")))},v=function(e){var t,a=e.data,n=void 0===a?[]:a,o=e.error,r=void 0===o?null:o,c=e.loading,u=e.setSortBy,s=e.sortBy;return n.sort((function(e,t){return"author"===s?(e.volumeInfo.authors?e.volumeInfo.authors[0]:"ZZZ").localeCompare(t.volumeInfo.authors?t.volumeInfo.authors[0]:"ZZZ"):"pages"===s?(null!==(a=e.volumeInfo.pageCount)&&void 0!==a?a:Number.MAX_SAFE_INTEGER)-(null!==(n=t.volumeInfo.pageCount)&&void 0!==n?n:Number.MAX_SAFE_INTEGER):"date"===s?(console.log(new Date(e.volumeInfo.publishedDate).getUTCSeconds()),(e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).toISOString():(new Date).toISOString()).localeCompare(t.volumeInfo.publishedDate?new Date(t.volumeInfo.publishedDate).toISOString():(new Date).toISOString())):e.volumeInfo.title.localeCompare(t.volumeInfo.title);var a,n})),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("caption",{className:"sr-only"},"Books Table"),l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",onClick:function(){return u("title")}},"Title ","title"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return u("author")}},"Author ","author"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return u("date")}},"Published ","date"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return u("pages")}},"Pages ","pages"===s?l.a.createElement("span",null,"*"):null))),l.a.createElement("tbody",null,n.length>0?n.map((function(e,t){var a,n;return l.a.createElement("tr",{key:e.id+t,tabIndex:0},l.a.createElement("td",null,null!==(a=e.volumeInfo.title)&&void 0!==a?a:"---"),l.a.createElement("td",null,e.volumeInfo.authors?e.volumeInfo.authors[0]:"---"),l.a.createElement("td",null,e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).toLocaleDateString():"---"),l.a.createElement("td",null,null!==(n=e.volumeInfo.pageCount)&&void 0!==n?n:"---"))})):c?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},"Loading books...")):r?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},null!==(t=r.message)&&void 0!==t?t:"There was an error with your search.")):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},"No books found, maybe refine your search?")))))};var E=a(5),f=a.n(E),p=a(16),g=a(17),b=a.n(g),I=function(){var e=Object(p.a)(f.a.mark((function e(t,a,n){var l,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(encodeURIComponent(a),"&fields=kind,items(id,volumeInfo(authors,imageLinks,pageCount,publishedDate,subtitle,title)),totalItems&startIndex=").concat(n));case 2:return l=e.sent,o=l.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var k=function(e){var t,a,n=e.searchQuery,o=e.isFetchingCallback,r=l.a.useState(0),s=Object(u.a)(r,2),i=s[0],m=s[1],h=l.a.useState("title"),E=Object(u.a)(h,2),f=E[0],p=E[1],g=function(e,t){return Object(c.c)(["books",e,t],I,{enabled:e})}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=l.a.useState(e),n=Object(u.a)(a,2),o=n[0],r=n[1];return l.a.useEffect((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}(n,600),10*i),b=g.status,k=g.data,S=g.error,w=g.isFetching;l.a.useEffect((function(){return o(w)}),[w,o]);var C=null!==(t=null===k||void 0===k?void 0:k.items)&&void 0!==t?t:[],y=null!==(a=null===k||void 0===k?void 0:k.totalItems)&&void 0!==a?a:0;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"* Sorted by"),l.a.createElement(v,{data:C,loading:w,sortBy:f,setSortBy:p,error:"error"===b&&S}),l.a.createElement(d,{count:y,page:i,onClick:m}))},S=function(e){var t=e.isFetching,a=e.value,n=e.onChange;return l.a.createElement("form",{className:"search"},l.a.createElement("div",{role:"search"},l.a.createElement("label",{className:"sr-only",htmlFor:"book-search"},"Search books"),l.a.createElement("span",{className:"search-icon"},t?l.a.createElement("span",{role:"img","aria-label":"Fetching Icon"},"\u23f3"):l.a.createElement("span",{role:"img","aria-label":"Search Icon"},"\ud83d\udd0d")),l.a.createElement("input",{id:"book-search",placeholder:"Search books...",type:"text",value:a,onChange:n})))},w=new c.a;r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(c.b,{queryCache:w},l.a.createElement(s,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.00731721.chunk.js.map
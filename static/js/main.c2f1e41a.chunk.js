(this["webpackJsonpreact-books"]=this["webpackJsonpreact-books"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/logo.28a32a78.svg"},18:function(e,t,a){e.exports=a(43)},23:function(e,t,a){},24:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(3),r=a.n(o),u=a(4);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(23),a(24);var c=a(2),i=function(){var e=l.a.useState(""),t=Object(c.a)(e,2),a=t[0],n=t[1],o=l.a.useState(!1),r=Object(c.a)(o,2),u=r[0],i=r[1],s=l.a.useState(0),m=Object(c.a)(s,2),v=m[0],f=m[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,null),l.a.createElement("main",null,l.a.createElement(y,{isFetching:u,onChange:function(e){f(0),n(e.currentTarget.value)},value:a}),l.a.createElement("h2",{className:"sr-only"},"Book List"),l.a.createElement(S,{page:v,setPage:f,searchQuery:a,isFetchingCallback:i})))},s=a(15),m=a.n(s),d=function(){return l.a.createElement("header",null,l.a.createElement("h1",{className:"sr-only"},"React Bookshelf"),l.a.createElement("img",{src:m.a,className:"logo",alt:"React Bookshelf"}))},v=function(e){var t,a,n,o,u,c,i,s,m=e.isVisible,d=e.toggleVisibility,v=e.book,f=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"backdrop",onClick:d}),l.a.createElement("div",{className:"modal","aria-modal":!0,"aria-label":"Book Details",role:"dialog"},(null===(t=v.volumeInfo)||void 0===t||null===(a=t.imageLinks)||void 0===a?void 0:a.thumbnail)?l.a.createElement("img",{className:"modal-image",src:v.volumeInfo.imageLinks.thumbnail,alt:v.volumeInfo.title}):null,(null===(n=v.volumeInfo)||void 0===n?void 0:n.title)?l.a.createElement("h2",null,v.volumeInfo.title):null,(null===(o=v.volumeInfo)||void 0===o?void 0:o.subtitle)?l.a.createElement("h3",null,v.volumeInfo.subtitle):null,l.a.createElement("p",null,(null===(u=v.volumeInfo)||void 0===u?void 0:u.publishedDate)?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,v.volumeInfo.publishedDate),l.a.createElement("br",null)):null,(null===(c=v.volumeInfo)||void 0===c?void 0:c.authors)?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",null,v.volumeInfo.authors[0]),l.a.createElement("br",null)):null,(null===(i=v.volumeInfo)||void 0===i?void 0:i.pageCount)?l.a.createElement(l.a.Fragment,null,"Pages: ",v.volumeInfo.pageCount,l.a.createElement("br",null)):null),(null===(s=v.saleInfo)||void 0===s?void 0:s.buyLink)?l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:v.saleInfo.buyLink,target:"_blank",rel:"noopener noreferrer",className:"button"},"Purchase"),l.a.createElement("br",null)):null,l.a.createElement("span",{className:"modal-close","aria-label":"Close Book Details",onClick:d},"\xd7")));return m?r.a.createPortal(f,document.body):null},f=function(e){var t=e.count,a=e.page,n=e.onClick;return l.a.createElement("div",{className:"table-actions"},l.a.createElement("button",{disabled:0===t||0===a,onClick:function(){return n(a-1)}},l.a.createElement("span",{role:"img","aria-label":"Show Previous"},"\ud83d\udc48"),l.a.createElement("span",null," Prev")),l.a.createElement("span",{className:"progress"},t>0?"Showing ".concat(0===a?1:10*a," - ").concat(10*(a+1)," of ").concat(t):null),l.a.createElement("button",{disabled:0===t||t/a<=10,onClick:function(){return n(a+1)}},l.a.createElement("span",null,"Next "),l.a.createElement("span",{role:"img","aria-label":"Show Next"},"\ud83d\udc49")))},E=function(e){var t,a=e.data,n=void 0===a?[]:a,o=e.error,r=void 0===o?null:o,u=e.loading,i=e.setSortBy,s=e.sortBy,m=l.a.useState({}),d=Object(c.a)(m,2),f=d[0],E=d[1],b=function(){var e=l.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1];return{modalIsVisible:a,toggleModalVisibility:function(){return n(!a)}}}(),h=b.modalIsVisible,g=b.toggleModalVisibility;return n.sort((function(e,t){return"author"===s?(e.volumeInfo.authors?e.volumeInfo.authors[0]:"ZZZ").localeCompare(t.volumeInfo.authors?t.volumeInfo.authors[0]:"ZZZ"):"pages"===s?(null!==(a=e.volumeInfo.pageCount)&&void 0!==a?a:Number.MAX_SAFE_INTEGER)-(null!==(n=t.volumeInfo.pageCount)&&void 0!==n?n:Number.MAX_SAFE_INTEGER):"date"===s?(console.log(new Date(e.volumeInfo.publishedDate).getUTCSeconds()),(e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).toISOString():(new Date).toISOString()).localeCompare(t.volumeInfo.publishedDate?new Date(t.volumeInfo.publishedDate).toISOString():(new Date).toISOString())):e.volumeInfo.title.localeCompare(t.volumeInfo.title);var a,n})),l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("caption",{className:"sr-only"},"Books Table"),l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",onClick:function(){return i("title")}},"Title ","title"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return i("author")}},"Author ","author"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return i("date")}},"Published ","date"===s?l.a.createElement("span",null,"*"):null),l.a.createElement("th",{scope:"col",onClick:function(){return i("pages")}},"Pages ","pages"===s?l.a.createElement("span",null,"*"):null))),l.a.createElement("tbody",null,n.length>0?n.map((function(e){var t,a;return l.a.createElement("tr",{key:e.id,tabIndex:0,onClick:function(){return function(e){E(e),g()}(e)}},l.a.createElement("td",null,null!==(t=e.volumeInfo.title)&&void 0!==t?t:"---"),l.a.createElement("td",null,e.volumeInfo.authors?e.volumeInfo.authors[0]:"---"),l.a.createElement("td",null,e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).toLocaleDateString():"---"),l.a.createElement("td",null,null!==(a=e.volumeInfo.pageCount)&&void 0!==a?a:"---"))})):u?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},"Loading books...")):r?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},null!==(t=r.message)&&void 0!==t?t:"There was an error with your search.")):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4},"No books found, maybe refine your search?")))),l.a.createElement(v,{isVisible:h,toggleVisibility:g,book:f}))};var b=a(5),h=a.n(b),g=a(16),p=a(17),I=a.n(p),k=function(){var e=Object(g.a)(h.a.mark((function e(t,a,n){var l,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(encodeURIComponent(a),"&fields=kind,items(id,volumeInfo(authors,imageLinks,pageCount,publishedDate,subtitle,title),saleInfo(buyLink)),totalItems&startIndex=").concat(n));case 2:return l=e.sent,o=l.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var S=function(e){var t,a,n=e.searchQuery,o=e.isFetchingCallback,r=e.page,i=e.setPage,s=l.a.useState("title"),m=Object(c.a)(s,2),d=m[0],v=m[1],b=function(e,t){return Object(u.c)(["books",e,t],k,{enabled:e})}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=l.a.useState(e),n=Object(c.a)(a,2),o=n[0],r=n[1];return l.a.useEffect((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}(n,600),10*r),h=b.status,g=b.data,p=b.error,I=b.isFetching;l.a.useEffect((function(){return o(I)}),[I,o]);var S=null!==(t=null===g||void 0===g?void 0:g.items)&&void 0!==t?t:[],y=null!==(a=null===g||void 0===g?void 0:g.totalItems)&&void 0!==a?a:0;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"* Sort Priority"),l.a.createElement(E,{data:S,loading:I,sortBy:d,setSortBy:v,error:"error"===h&&p}),l.a.createElement(f,{count:y,page:r,onClick:i}))},y=function(e){var t=e.isFetching,a=e.value,n=e.onChange;return l.a.createElement("form",{className:"search"},l.a.createElement("div",{role:"search"},l.a.createElement("label",{className:"sr-only",htmlFor:"book-search"},"Search books"),l.a.createElement("span",{className:"search-icon"},t?l.a.createElement("span",{role:"img","aria-label":"Fetching Icon"},"\u23f3"):l.a.createElement("span",{role:"img","aria-label":"Search Icon"},"\ud83d\udd0d")),l.a.createElement("input",{id:"book-search",placeholder:"Search books...",type:"text",value:a,onChange:n})))},C=new u.a;r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(u.b,{queryCache:C},l.a.createElement(i,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.c2f1e41a.chunk.js.map
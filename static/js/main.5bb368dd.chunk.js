(this["webpackJsonpreact-books"]=this["webpackJsonpreact-books"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/logo.28a32a78.svg"},19:function(e,t,a){e.exports=a(44)},24:function(e,t,a){},25:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(4),l=a.n(r),c=a(3);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(24),a(25);var u=a(2),i=function(){var e=o.a.useState(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),l=Object(u.a)(r,2),c=l[0],i=l[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement("main",null,o.a.createElement(w,{isFetching:c,onChange:function(e){return n(e.currentTarget.value)},value:a}),o.a.createElement("h2",{className:"sr-only"},"Book List"),o.a.createElement(I,{searchQuery:a,isFetchingCallback:i})))},s=a(15),m=a.n(s),h=function(){return o.a.createElement("header",null,o.a.createElement("h1",{className:"sr-only"},"React Bookshelf"),o.a.createElement("img",{src:m.a,className:"logo",alt:"React Bookshelf"}))},v=function(e){var t=e.count,a=e.page,n=e.onClick;return o.a.createElement("div",{className:"table-actions"},o.a.createElement("button",{disabled:0===t||0===a,onClick:function(){return n(a-1)}},o.a.createElement("span",{role:"img","aria-label":"Show Previous"},"\ud83d\udc48"),o.a.createElement("span",null," Previous")),o.a.createElement("span",null,t>0?"Showing ".concat(0===a?1:10*a," - ").concat(10*(a+1)," of ").concat(t):null),o.a.createElement("button",{disabled:0===t||t/a<=10,onClick:function(){return n(a+1)}},o.a.createElement("span",null,"Next "),o.a.createElement("span",{role:"img","aria-label":"Show Next"},"\ud83d\udc49")))},d=a(18),f=function(e){var t,a=e.data,n=void 0===a?[]:a,r=e.error,l=void 0===r?null:r,c=e.loading,u=e.sortBy;return o.a.createElement("table",null,o.a.createElement("caption",{className:"sr-only"},"Books Table"),o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col",onClick:function(){return u("title")}},"Title"),o.a.createElement("th",{scope:"col",onClick:function(){return u("author")}},"Author"),o.a.createElement("th",{scope:"col",onClick:function(){return u("pages")}},"Page Count"))),o.a.createElement("tbody",null,n.length>0?n.map((function(e,t){var a,n;return o.a.createElement("tr",{key:e.id+t},o.a.createElement("td",null,null!==(a=e.volumeInfo.title)&&void 0!==a?a:"---"),o.a.createElement("td",null,e.volumeInfo.authors?e.volumeInfo.authors[0]:"---"),o.a.createElement("td",null,null!==(n=e.volumeInfo.pageCount)&&void 0!==n?n:"---"))})):c?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3},"Loading books...")):l?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3},null!==(t=l.message)&&void 0!==t?t:"There was an error with your search.")):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3},"No books found, maybe refine your search?"))))};var E=a(5),p=a.n(E),g=a(16),b=a(17),k=a.n(b),C=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n){var o,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(encodeURIComponent(a),"&fields=kind,items(id,volumeInfo(authors,imageLinks,pageCount,publishedDate,subtitle,title)),totalItems&startIndex=").concat(n));case 2:return o=e.sent,r=o.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var I=function(e){var t,a,n=e.searchQuery,r=e.isFetchingCallback,l=o.a.useState(0),i=Object(u.a)(l,2),s=i[0],m=i[1],h=o.a.useState("title"),E=Object(u.a)(h,2),p=E[0],g=E[1],b=function(e,t){return Object(c.c)(["books",e,t],C,{enabled:e})}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=o.a.useState(e),n=Object(u.a)(a,2),r=n[0],l=n[1];return o.a.useEffect((function(){var a=setTimeout((function(){l(e)}),t);return function(){clearTimeout(a)}}),[e,t]),r}(n,600),10*s),k=b.status,I=b.data,w=b.error,y=b.isFetching;o.a.useEffect((function(){return r(y)}),[y,r]);var S=null!==(t=null===I||void 0===I?void 0:I.totalItems)&&void 0!==t?t:0,N=(null!==(a=null===I||void 0===I?void 0:I.items)&&void 0!==a?a:[]).sort((function(e,t){return"author"===p?(e.volumeInfo.authors?e.volumeInfo.authors[0]:"ZZZ").localeCompare(t.volumeInfo.authors?t.volumeInfo.authors[0]:"ZZZ"):"pages"===p?(null!==(a=e.volumeInfo.pageCount)&&void 0!==a?a:9999)-(null!==(n=t.volumeInfo.pageCount)&&void 0!==n?n:9999):e.volumeInfo.title.localeCompare(t.volumeInfo.title);var a,n}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(f,{data:N,loading:y,sortBy:g,error:"error"===k&&w}),o.a.createElement(v,{count:S,page:s,onClick:m}),o.a.createElement(d.ReactQueryDevtools,{initialIsOpen:!0}))},w=function(e){var t=e.isFetching,a=e.value,n=e.onChange;return o.a.createElement("form",{className:"search"},o.a.createElement("div",{role:"search"},o.a.createElement("label",{className:"sr-only",htmlFor:"book-search"},"Search books"),o.a.createElement("span",{className:"search-icon"},t?o.a.createElement("span",{role:"img","aria-label":"Fetching Icon"},"\u23f3"):o.a.createElement("span",{role:"img","aria-label":"Search Icon"},"\ud83d\udd0d")),o.a.createElement("input",{id:"book-search",placeholder:"Search books...",type:"text",value:a,onChange:n})))},y=new c.a;l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.b,{queryCache:y},o.a.createElement(i,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.5bb368dd.chunk.js.map